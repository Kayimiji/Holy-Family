<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clinic Profile Walkthrough</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --sidebar-bg:#2c3e50;
  --sidebar-active:#00bfff;
  --bg:#eef8fc;
  --card:#ffffff;
  --shadow:0 4px 12px rgba(0,0,0,.08);
  --text:#2c3e50;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif}
body{background:var(--bg);color:var(--text)}
 

/* ===== SIDEBAR ===== */
.sidebar{
  width:250px;
  background:var(--sidebar-bg);
  color:#fff;
  position:fixed;
  top:0;left:0;bottom:0;
}
.sidebar-header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:20px;
}
.logo-container{
  position:relative;
  width:50px;
  height:50px;
}
.sidebar-logo{
  width:50px;
  height:50px;
  border-radius:50%;
  position:relative;
  z-index:2;
}
.logo-glow{
  position:absolute;
  width:50px;
  height:50px;
  border-radius:50%;
  background:radial-gradient(circle, rgba(0,191,255,0.3) 0%, transparent 70%);
  top:0;
  left:0;
  animation:glow 2s ease-in-out infinite;
}
@keyframes glow{
  0%,100%{transform:scale(1);opacity:0.8;}
  50%{transform:scale(1.1);opacity:1;}
}
.sidebar-title h2{
  font-size:16px;
  color:var(--sidebar-active);
  line-height:1.1;
}
.sidebar-menu{list-style:none}
.sidebar-menu a{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 20px;
  color:#fff;
  text-decoration:none;
}
.sidebar-menu a:hover,
.sidebar-menu a.active{
  background:rgba(0,191,255,.2);
  border-left:4px solid var(--sidebar-active);
}

/* ===== DROPDOWN ===== */
.sidebar-menu .dropdown {
  position: relative;
}
.sidebar-menu .dropdown-toggle {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 20px;
  color: #fff;
  text-decoration: none;
  background: none;
  border: none;
  width: 100%;
  text-align: left;
  cursor: pointer;
  font: inherit;
}
.sidebar-menu .dropdown-toggle .arrow{
  margin-left:auto;
  transition:transform 0.3s ease;
}
.sidebar-menu .dropdown.open > .dropdown-toggle .arrow {
  transform: rotate(-180deg);
}
.sidebar-menu .submenu {
  display: none;
  flex-direction: column;
  background: #34495e;
  margin-left: 0;
  padding-left: 0;
  list-style: none;
}
.sidebar-menu .dropdown.open > .submenu {
  display: flex;
}
.sidebar-menu .submenu li a {
  padding: 10px 40px;
  color: #fff;
  background: none;
  border-left: 4px solid transparent;
  font-size: 15px;
  display: block;
}
.sidebar-menu .submenu li a:hover,
.sidebar-menu .submenu li a.active {
  background: rgba(0,191,255,.15);
  border-left: 4px solid var(--sidebar-active);
}

/* ===== MAIN ===== */
.main{
  margin-left:250px;
  width:calc(100% - 250px);
  display:flex;
  flex-direction:column;
}

/* ===== CONTAINER ===== */

.container {
  background: #fff;
  padding: 30px 25px;
  border-radius: 14px;
  max-width: 500px;
  width: 90%;
  margin: 50px auto;
  box-shadow: 0 10px 30px rgba(255, 255, 255, 0.805);
}


/* ===== PROGRESS BAR ===== */
.progress{display:flex;gap:10px;margin-bottom:25px;}
.progress div{flex:1;padding:10px;text-align:center;border-radius:20px;background:#e5e7eb;font-weight:bold;}
.progress .active{background:#0ea5e9;color:#fff;}

/* ===== FORM ===== */
label{display:block;margin-top:15px;font-weight:bold;}
input{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ccc;}
canvas{border:2px dashed #cbd5e1;border-radius:10px;margin-top:10px;}

/* ===== LOGO PREVIEW ===== */
#logoPreview{max-width:140px;margin-top:10px;display:block;}

/* ===== BUTTONS ===== */
.btn{margin-top:15px;padding:10px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:bold;}
.btn-primary{background:#0ea5e9;color:#fff;}
.btn-secondary{background:#e5e7eb;color:#000;}

/* ===== WALKTHROUGH ===== */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.65);display:none;z-index:9998;}
.spotlight{box-shadow:0 0 0 9999px rgba(255, 255, 255, 0);border-radius:12px;position:relative;z-index:9999;}
.walkthrough-box{
  position:fixed;bottom:30px;right:30px;width:320px;background:#fff;padding:18px;border-radius:16px;
  box-shadow:0 15px 40px rgba(255, 255, 255, 0.912);z-index:10000;display:none;
}
.walkthrough-box h4{margin:0 0 10px;color:#0ea5e9;}
.walkthrough-box .hint{font-size:13px;color:#0ea5e9;margin-top:8px;}
.controls{display:flex;justify-content:space-between;margin-top:15px;}
.controls button{border:none;border-radius:8px;padding:8px 12px;cursor:pointer;font-weight:bold;}

/* ===== ARROW ===== */
.arrow{
  position:absolute;width:0;height:0;
  border-left:14px solid transparent;border-right:14px solid transparent;
  border-bottom:22px solid #0ea5e9;animation:bounce 1s infinite;
  z-index:10001;display:none;
}

@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
}

/* ===== FAB BUTTON ===== */
.fab-container {
  position: fixed;
  bottom: 25px;
  right: 25px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 1000;
}

.tutorial-fab {
  background: linear-gradient(135deg, #00bfff 0%, #00d4ff 100%);
  color: #fff;
  width: 55px;
  height: 55px;
  border-radius: 50%;
  border: none;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.tutorial-fab:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  background: linear-gradient(135deg, #0099cc 0%, #0099ff 100%);
}

@media (max-width: 600px) {
  .container {
    padding: 20px;
    max-width: 95%;
  }
}
</style>
</head>

<body>
<div class="dashboard">

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-header">
    <div class="logo-container">
      <img src="logo.png" alt="Holy Family Dental Clinic Logo" class="sidebar-logo">
      <div class="logo-glow"></div>
    </div>
    <div class="sidebar-title">
      <h2>
        <span class="holy-family">SMART</span><br>
        <span class="dental-clinic">DENTISTRY</span>
      </h2>
    </div>
  </div>

  <ul class="sidebar-menu">
    <li><a href="admin.html"><i class="fas fa-home"></i> Dashboard</a></li>
    <li class="dropdown">
      <a href="javascript:void(0)" class="dropdown-toggle" onclick="toggleDropdown(event)">
        <i class="fas fa-tooth"></i>
        <span>My Clinic</span>
        <i class="fas fa-chevron-down arrow"></i>
      </a>
      <ul class="submenu">
        <li><a href="clinic-profile.html">Clinic Profile</a></li>
        <li><a href="Dental-Chart.html">Dental Chart</a></li>
        <li><a href="Braces-Treatment.html">Braces Treatment</a></li>
        <li><a href="MyRecords.html">Patient Record</a></li>
      </ul>
    </li>
    <li><a href="appointment-history.html"><i class="fas fa-calendar-alt"></i><span> Appointment History</span></a></li>
    <li><a href="Finance.html"><i class="fas fa-dollar-sign"></i> Finance</a></li>
    <li><a href="Data-Back-Up.html"><i class="fa solid fa-database"></i> Data BackUp</a></li>
    <li><a href="Reports.html"><i class="fas fa-chart-line"></i> Reports</a></li>
    <li><a href="landingpage.html" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
  </ul>

  <!-- Add Return to Home menu at the bottom -->
  <div style="position: absolute; bottom: 20px; width: 13%;">
    <div style="position: absolute; bottom: 20px; width: 100%;">
      <ul class="sidebar-menu settings-menu">
        <li><a href="Admin settings.html"><i class="fas fa-cog"></i> Settings</a></li>
      </ul>
      <ul class="sidebar-menu return-home-menu">
        <li><a href="landingpage.html" class="logout-btn"><i class="fas fa-arrow-left"></i> Return to Home</a></li>
      </ul>
    </div>
  </div>
</aside>

  <!-- Main -->
  <div class="main">
    <div class="container">
      <!-- Progress -->
      <div class="progress">
        <div id="p1" class="active">Clinic</div>
        <div id="p2">Dentist</div>
        <div id="p3">Finish</div>
      </div>

      <label>Clinic Name</label>
      <input id="clinicName">

      <label>Contact Number</label>
      <input type="text">

      <label>Address</label>
      <input type="text">

      <label>Dentist Name</label>
      <input id="dentistName">

      <label>Email</label>
      <input type="email">

      <label>Signature</label>
      <canvas id="signatureCanvas" width="300" height="120"></canvas><br>
      <button class="btn btn-secondary" id="clearSignatureBtn">Clear</button>

      <label>Clinic Logo</label>
      <input type="file" id="logoUpload">
      <img id="logoPreview">

      <br>
      <button class="btn btn-primary" id="saveProfileBtn">Save Profile</button>
    </div>
  </div>
</div>

<!-- WALKTHROUGH ELEMENTS -->
<div class="overlay" id="overlay"></div>
<div id="arrow" class="arrow"></div>
<div class="walkthrough-box" id="walkBox">
  <h4 id="walkTitle"></h4>
  <p id="walkText"></p>
  <div class="hint">ðŸ‘† Follow the arrow and complete this step</div>
  <div class="controls">
    <button onclick="skipTour()">Skip</button>
    <button onclick="nextTour()">Next</button>
  </div>
</div>

<!-- FAB BUTTON -->
<div class="fab-container">
  <button class="tutorial-fab" id="tutorialFabBtn" onclick="startTutorial()" title="Start Tutorial">
    <i class="fas fa-book"></i>
  </button>
</div>

<script>
/* DROPDOWN FOR MY CLINIC */
function toggleDropdown(e) {
  e.preventDefault();
  const li = e.currentTarget.closest('.dropdown');
  const isOpen = li.classList.contains('open');
  // Close all dropdowns
  document.querySelectorAll('.sidebar-menu .dropdown').forEach(d => d.classList.remove('open'));
  // Open if not already open
  if (!isOpen) li.classList.add('open');
}

// Keep dropdown open if current page is in submenu
(function() {
  const path = window.location.pathname.split('/').pop();
  document.querySelectorAll('.sidebar-menu .dropdown').forEach(drop => {
    drop.querySelectorAll('.submenu a').forEach(a => {
      if (a.getAttribute('href') === path) {
        a.classList.add('active');
        drop.classList.add('open');
      }
    });
  });
})();

/* WALKTHROUGH */
const steps = [
  { el:"#clinicName", title:"ðŸ¥ Clinic Name", text:"Enter your clinic's official name.", progress:"p1" },
  { el:"#dentistName", title:"ðŸ¦· Dentist Name", text:"Type the main dentist or clinic owner.", progress:"p2" },
  { el:"#signatureCanvas", title:"âœï¸ Signature", text:"Draw your digital signature.", progress:"p2" },
  { el:"#logoUpload", title:"ðŸ–¼ï¸ Clinic Logo", text:"Upload your clinic logo.", progress:"p3" },
  { el:"#saveProfileBtn", title:"ðŸ’¾ Save Profile", text:"Click to save all information.", progress:"p3" }
];

let current = 0;
let tutorialCompleted = localStorage.getItem('clinicProfileTutorialCompleted') === 'true';
let tutorialAutoStarted = false;

function showStep(i){
  document.querySelectorAll(".spotlight").forEach(e=>e.classList.remove("spotlight"));
  document.querySelectorAll(".progress div").forEach(p=>p.classList.remove("active"));

  const step = steps[i];
  const el = document.querySelector(step.el);
  const rect = el.getBoundingClientRect();

  el.classList.add("spotlight");
  document.getElementById(step.progress).classList.add("active");

  document.getElementById("walkTitle").innerText = step.title;
  document.getElementById("walkText").innerText = step.text;

  const arrow = document.getElementById("arrow");
  arrow.style.left = rect.left + rect.width/2 - 14 + "px";
  arrow.style.top = rect.top - 35 + "px";
  arrow.style.display = "block";

  document.getElementById("overlay").style.display = "block";
  document.getElementById("walkBox").style.display = "block";
}

function nextTour(){
  current++;
  if(current >= steps.length){ 
    endTour();
    tutorialCompleted = true;
    localStorage.setItem('clinicProfileTutorialCompleted', 'true');
    return; 
  }
  showStep(current);
}

function skipTour(){
  tutorialCompleted = true;
  localStorage.setItem('clinicProfileTutorialCompleted', 'true');
  endTour();
}

function endTour(){
  document.getElementById("arrow").style.display="none";
  document.querySelectorAll(".spotlight").forEach(e=>e.classList.remove("spotlight"));
  document.getElementById("overlay").style.display="none";
  document.getElementById("walkBox").style.display="none";
}

function startTutorial(){
  current = 0;
  tutorialCompleted = false;
  showStep(0);
}

// Auto-start tutorial only if not completed
window.addEventListener('load', function(){
  if (!tutorialCompleted && !tutorialAutoStarted) {
    tutorialAutoStarted = true;
    setTimeout(() => {
      startTutorial();
    }, 800);
  }
});

/* SIGNATURE */
const canvas=document.getElementById("signatureCanvas");
const ctx=canvas.getContext("2d");
let drawing=false;

canvas.onmousedown=()=>drawing=true;
canvas.onmouseup=()=>{drawing=false;ctx.beginPath();}
canvas.onmousemove=e=>{
  if(!drawing) return;
  ctx.lineWidth=2;
  ctx.lineCap="round";
  ctx.lineTo(e.offsetX,e.offsetY);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(e.offsetX,e.offsetY);
};

document.getElementById("clearSignatureBtn").onclick=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);};

document.getElementById("logoUpload").onchange=e=>{
  const r=new FileReader();
  r.onload=()=>document.getElementById("logoPreview").src=r.result;
  r.readAsDataURL(e.target.files[0]);
};

document.getElementById("saveProfileBtn").onclick=()=>{
  tutorialCompleted = true;
  localStorage.setItem('clinicProfileTutorialCompleted', 'true');
};

const logoutButtons = document.querySelectorAll('.logout-btn');
logoutButtons.forEach(button => {
  button.addEventListener('click', async (e) => {
    e.preventDefault();
    sessionStorage.removeItem('user');
    localStorage.removeItem('user');
    window.location.href = 'landingpage.html';
  });
});
</script>

</body>
</html>
