<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Dentistry â€“ Odontogram & Prescription</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --sidebar-bg:#2c3e50;
  --sidebar-active:#00bfff;
  --bg:#eef8fc;
  --card:#ffffff;
  --shadow:0 4px 12px rgba(0,0,0,.08);
  --text:#2c3e50;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif}
body{background:var(--bg);color:var(--text)}
.dashboard{display:flex;min-height:100vh}

/* ===== SIDEBAR ===== */
.sidebar{
  width:250px;
  background:var(--sidebar-bg);
  color:#fff;
  position:fixed;
  top:0;left:0;bottom:0;
}
.sidebar-header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:20px;
}
.sidebar-logo{
  width:50px;
  height:50px;
  border-radius:50%;
}
.sidebar-title h2{
  font-size:16px;
  color:var(--sidebar-active);
  line-height:1.1;
}
.sidebar-menu{list-style:none}
.sidebar-menu a{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 20px;
  color:#fff;
  text-decoration:none;
}
.sidebar-menu a:hover,
.sidebar-menu a.active{
  background:rgba(0,191,255,.2);
  border-left:4px solid var(--sidebar-active);
}
.dropdown .arrow{
  margin-left:auto;
  transition:.3s;
}
.dropdown.open .arrow{
  transform:rotate(180deg);
}
.submenu{
  list-style:none;
  display:none;
  background:#243444;
}
.dropdown.open .submenu{
  display:block;
}
.submenu a{
  padding:10px 40px;
  font-size:14px;
}

/* ===== MAIN ===== */
.main{
  margin-left:250px;
  width:calc(100% - 250px);
  display:flex;
  flex-direction:column;
}

/* LAYOUT */
.wrapper{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}
.card{
  background:var(--card);
  padding:20px;
  border-radius:8px;
  box-shadow:var(--shadow);
}

/* ODONTOGRAM */
#teeth{
  display:grid;
  grid-template-columns:repeat(8,1fr);
  gap:6px;
}
.tooth{
  padding:8px;
  border:1px solid #ccc;
  border-radius:4px;
  text-align:center;
  cursor:pointer;
  font-size:12px;
}
.decay{background:#9b59b6;color:#fff;}
.periodontal{background:#3498db;color:#fff;}
.trauma{background:#e74c3c;color:#fff;}
.structural{background:#e67e22;color:#fff;}
.developmental{background:#2ecc71;color:#fff;}

/* FORM */
input,select,textarea{
  width:100%;
  padding:6px;
  margin-bottom:8px;
}
button{
  padding:8px 12px;
  border:none;
  border-radius:4px;
  cursor:pointer;
}
.blue{background:#56c1ff;color:#fff;}
.green{background:#34ff88;color:#fff;}
.gray{background:#3ee9ff;color:#fff;}

.medicine{
  display:flex;
  gap:5px;
  margin-bottom:5px;
}
.medicine input{flex:1}

/* PREVIEW */
#preview{
  border:1px solid #ccc;
  padding:15px;
  min-height:200px;
}

/* ===== TUTORIAL ===== */
#tutorialOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  display:none;
  z-index:999;
}
.tutorial-box{
  position:absolute;
  background:#fff;
  padding:20px;
  border-radius:10px;
  width:320px;
}
.highlight{
  box-shadow:0 0 0 4px #00e5ff;
  border-radius:6px;
  transition: transform 0.3s;
}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}
.tour-progress{
  font-size:12px;
  color:#64748b;
  margin-bottom:6px;
}
.tour-arrow{
  position:fixed;
  width:0;height:0;
  border-left:12px solid transparent;
  border-right:12px solid transparent;
  border-top:22px solid #00e5ff;
  animation:bounce 1s infinite;
  z-index:1001;
  display:none;
}
@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
}
.tutorial-box{
  animation:fade .4s ease;
}
.restart-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#0ea5e9;
  color:#fff;
  border:none;
  padding:10px 14px;
  border-radius:20px;
  cursor:pointer;
  z-index:1000;
  box-shadow:0 6px 15px rgba(0,0,0,.25);
}
.fab-container .tutorial-fab:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  background: linear-gradient(135deg, #0099cc 0%, #00bfff 100%);
}
</style>
</head>

<body>
<div class="dashboard">

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-header">
    <img src="logo.png" class="sidebar-logo">
    <div class="sidebar-title">
      <h2>SMART<br>DENTISTRY</h2>
    </div>
  </div>

 <ul class="sidebar-menu">
  <li><a href="admin.html"><i class="fas fa-home"></i> Dashboard</a></li>

  <li class="dropdown open">
    <a href="#" class="dropdown-toggle">
      <i class="fas fa-tooth"></i> My Clinic
      <i class="fas fa-chevron-down arrow"></i>
    </a>
    <ul class="submenu">
      <li><a href="clinic-profile.html"><i class="fas fa-clinic-medical"></i> Clinic Profile</a></li>
      <li><a href="odontogram-prescription.html"><i class="fas fa-tooth"></i> Dental Chart</a></li>
      <li><a href="Braces-Treatment.html"><i class="fas fa-brackets-curly"></i> Braces Treatment</a></li>
      <li><a href="MyRecords.html"><i class="fas fa-file-medical"></i> Patient Records</a></li>
    </ul>
  </li>

  <li><a href="appointment-logs.html"><i class="fas fa-clipboard-list"></i> Appointment Logs</a></li>
  <li><a href="patients.html"><i class="fas fa-users"></i> Patients</a></li>
  <li><a href="Finance.html"><i class="fas fa-dollar-sign"></i> Finance</a></li>
  <li><a href="Reports.html"><i class="fas fa-chart-line"></i> Reports</a></li>
  <li><a href="Tutorial.html"><i class="fas fa-book"></i> Tutorial</a></li>
  <li><a href="landingpage.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
</ul>
</aside>

<!-- MAIN -->
<div class="main">

<!-- WALKTHROUGH ARROW -->
<div id="tourArrow" class="tour-arrow"></div>

<!-- RESTART BUTTON -->
<button class="restart-btn" id="restartTutorial">
ðŸ”„ Restart Tutorial
</button>

<div class="wrapper">

<!-- LEFT -->
<div class="card">
<h3>Odontogram</h3>

<select id="condition">
  <option value="">Select Condition</option>
  <option value="decay">Decay / Infection</option>
  <option value="periodontal">Periodontal</option>
  <option value="trauma">Loss / Trauma</option>
  <option value="structural">Structural Damage</option>
  <option value="developmental">Developmental</option>
</select>

<div id="teeth"></div>

<hr>

<h3>Prescription</h3>
<input id="clinic" placeholder="Clinic Name">
<input id="doctor" placeholder="Doctor Name">
<input type="date" id="date">

<input id="patient" placeholder="Patient Name">
<input id="age" placeholder="Age">

<select id="gender">
  <option>Male</option>
  <option>Female</option>
</select>

<textarea id="diagnosis" rows="4" placeholder="Auto Diagnosis"></textarea>
<textarea id="notes" placeholder="Notes"></textarea>

<h4>Medicines</h4>
<div id="medList"></div>
<button id="addMed" class="gray">+ Add Medicine</button>
<button id="update" class="blue">Update Preview</button>
</div>

<!-- RIGHT -->
<div class="card">
<h3>Prescription Preview</h3>
<div id="preview">No data yet</div><br>
<button id="print" class="green">Print</button>
<button id="pdf" class="blue">Export PDF</button>
</div>

</div>

<!-- TUTORIAL -->
<div id="tutorialOverlay">
  <div class="tutorial-box" id="tutorialBox">
    <h4 id="tTitle"></h4>
    <p id="tText"></p>
    <button id="prev">Back</button>
    <button id="next">Next</button>
  </div>
</div>

<div class="fab-container" style="position: fixed; bottom: 25px; right: 25px; display: flex; flex-direction: column; gap: 12px; z-index: 1000;">
  <button class="fab tutorial-fab" id="tutorialFabBtn" onclick="startTutorial()" title="Start Tutorial" style="background: linear-gradient(135deg, #00bfff 0%, #00d4ff 100%); color: #fff; width: 55px; height: 55px; border-radius: 50%; border: none; font-size: 20px; cursor: pointer; box-shadow: 0 6px 15px rgba(0,0,0,0.2); transition: transform 0.2s ease, box-shadow 0.2s ease; display: flex; align-items: center; justify-content: center;">
    <i class="fas fa-book"></i>
  </button>
</div>

<script>
/* ========= ODONTOGRAM ========= */
const teethNums=[18,17,16,15,14,13,12,11,21,22,23,24,25,26,27,28,48,47,46,45,44,43,42,41,31,32,33,34,35,36,37,38];
const teethDiv=document.getElementById("teeth");
const condition=document.getElementById("condition");
const diagnosis=document.getElementById("diagnosis");
let state={};

teethNums.forEach(n=>{
  const d=document.createElement("div");
  d.className="tooth";
  d.textContent=n;
  d.onclick=()=>{ 
    if(!condition.value){alert("Select condition first");return;}
    d.className="tooth "+condition.value;
    state[n]=condition.value;
    autoDiagnosis();
  };
  teethDiv.appendChild(d);
});

function autoDiagnosis(){
  let map={};
  for(let t in state){
    map[state[t]]=map[state[t]]||[];
    map[state[t]].push(t);
  }
  let text="";
  if(map.decay) text+=`Decay: ${map.decay.join(", ")}\n`;
  if(map.periodontal) text+=`Periodontal: ${map.periodontal.join(", ")}\n`;
  if(map.trauma) text+=`Trauma: ${map.trauma.join(", ")}\n`;
  if(map.structural) text+=`Structural: ${map.structural.join(", ")}\n`;
  if(map.developmental) text+=`Developmental: ${map.developmental.join(", ")}\n`;
  diagnosis.value=text.trim();
}

/* ========= MEDICINE ========= */
const addMed=document.getElementById("addMed");
const medList=document.getElementById("medList");

addMed.onclick=()=>{
  const d=document.createElement("div");
  d.className="medicine";
  d.innerHTML=`
    <input placeholder="Medicine">
    <input placeholder="Dose">
    <input placeholder="Freq">
    <button onclick="this.parentElement.remove()">âœ–</button>`;
  medList.appendChild(d);
};

/* ========= PREVIEW ========= */
const update=document.getElementById("update");
const preview=document.getElementById("preview");

update.onclick=()=>{
  let meds="";
  document.querySelectorAll(".medicine").forEach(m=>{
    const i=m.querySelectorAll("input");
    meds+=`<li>${i[0].value} â€“ ${i[1].value} â€“ ${i[2].value}</li>`;
  });
  preview.innerHTML=`
    <h3>${document.getElementById("clinic").value}</h3>
    <p><b>Doctor:</b> ${document.getElementById("doctor").value}</p>
    <p><b>Date:</b> ${document.getElementById("date").value}</p>
    <p><b>Patient:</b> ${document.getElementById("patient").value} (${document.getElementById("age").value}, ${document.getElementById("gender").value})</p>
    <p><b>Diagnosis:</b><br>${diagnosis.value.replace(/\n/g,"<br>")}</p>
    <ul>${meds||"<li>No medicine</li>"}</ul>
    <p>${document.getElementById("notes").value}</p>`;
};

/* ========= PRINT / PDF ========= */
document.getElementById("print").onclick=()=>{
  update.click();
  const w=window.open();
  w.document.write(preview.innerHTML);
  w.print();
};
document.getElementById("pdf").onclick=()=>{update.click();window.print();};

/* ========= TUTORIAL ========= */
const steps=[
  {t:"Welcome",d:"This guide will show how to use the system",el:null},
  {t:"Select Condition",d:"Choose tooth condition",el:"#condition"},
  {t:"Click Teeth",d:"Click teeth to color & diagnose",el:"#teeth"},
  {t:"Auto Diagnosis",d:"Diagnosis fills automatically",el:"#diagnosis"},
  {t:"Add Medicine",d:"Add medicines here",el:"#addMed"},
  {t:"Preview",d:"Generate prescription preview",el:"#update"},
  {t:"Print / PDF",d:"Print or export prescription",el:"#print"}
];

let s=0;
const overlay=document.getElementById("tutorialOverlay");
const box=document.getElementById("tutorialBox");
const tTitle=document.getElementById("tTitle");
const tText=document.getElementById("tText");
const next=document.getElementById("next");
const prev=document.getElementById("prev");
const tourArrow=document.getElementById("tourArrow");

function showStep(){
  document.querySelectorAll(".highlight").forEach(e=>e.classList.remove("highlight"));
  const step = steps[s];
  tTitle.innerText = step.t;
  tText.innerHTML = `<div class="tour-progress">Step ${s+1} of ${steps.length}</div>${step.d}`;

  if(step.el){
    const el = document.querySelector(step.el);
    el.classList.add("highlight");
    el.scrollIntoView({behavior:"smooth",block:"center"});
    const r = el.getBoundingClientRect();
    box.style.top = r.bottom + 15 + "px";
    box.style.left = r.left + "px";
    box.style.transform = "";
    tourArrow.style.left = r.left + r.width/2 - 12 + "px";
    tourArrow.style.top = r.top - 25 + "px";
    tourArrow.style.display = "block";
  }else{
    box.style.top = "50%";
    box.style.left = "50%";
    box.style.transform = "translate(-50%,-50%)";
    tourArrow.style.display = "none";
  }
}

document.getElementById("restartTutorial").onclick = ()=>{
  s=0;
  overlay.style.display="block";
  showStep();
};

next.onclick = ()=>{
  if(s<steps.length-1){s++; showStep();}
};

prev.onclick = ()=>{
  if(s>0){s--; showStep();}
};

function startTutorial() {
  s = 0;
  document.getElementById("tutorialOverlay").style.display = "block";
  showStep();
}
</script>
</body>
</html>
