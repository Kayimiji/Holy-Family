<script>
const steps = [
  { el:"#clinicName", title:"Clinic Name", text:"Enter your clinic name." },
  { el:"#dentistName", title:"Dentist Name", text:"Enter the main dentist." },
  { el:"#signatureBox", title:"Signature", text:"Add a digital signature." },
  { el:"#clinicLogo", title:"Clinic Logo", text:"Upload clinic logo." },
  { el:"#saveProfileBtn", title:"Save Profile", text:"Save your clinic profile." }
];

let current = 0;

function showStep(i){
  document.querySelectorAll(".spotlight").forEach(e=>e.classList.remove("spotlight"));

  const step = steps[i];
  const el = document.querySelector(step.el);
  if(!el) return;

  el.classList.add("spotlight");

  const rect = el.getBoundingClientRect();
  const arrow = document.getElementById("arrow");

  arrow.style.left = rect.left + rect.width / 2 - 14 + "px";
  arrow.style.top = rect.top - 30 + "px";
  arrow.style.display = "block";

  document.getElementById("walkTitle").innerText = step.title;
  document.getElementById("walkText").innerText = step.text;
  document.getElementById("stepCounter").innerText =
    `Step ${i + 1} of ${steps.length}`;

  document.getElementById("overlay").style.display = "block";
  document.getElementById("walkBox").style.display = "block";
}

function nextTour(){
  current++;
  if(current >= steps.length){
    endTour();
    return;
  }
  showStep(current);
}

function skipTour(){
  endTour();
}

function endTour(){
  document.getElementById("arrow").style.display = "none";
  document.getElementById("overlay").style.display = "none";
  document.getElementById("walkBox").style.display = "none";
  document.querySelectorAll(".spotlight").forEach(e=>e.classList.remove("spotlight"));
}

function startTutorial(){
  current = 0;
  showStep(current);
}

/* AUTO PLAY ON FIRST LOGIN */
if(!localStorage.getItem("clinicTutorialDone")){
  setTimeout(startTutorial, 800);
  localStorage.setItem("clinicTutorialDone", "yes");
}
</script>
