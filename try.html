<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SMART DENTISTRY - Reports</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#00d4ff;
  --muted:#f8f9fb;
  --dark:#2c3e50;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Poppins,sans-serif;background:var(--muted)}
.dashboard{display:flex;min-height:100vh}

/* SIDEBAR */
.sidebar{
  width:260px;background:#2c3e50;color:#fff;
  position:fixed;height:100vh;overflow-y:auto
}
.sidebar-header{padding:20px;display:flex;gap:15px;align-items:center}
.sidebar-logo{width:70px;height:70px;border-radius:50%}
.sidebar-menu{list-style:none;padding:0}
.sidebar-menu a{
  display:flex;gap:10px;align-items:center;
  padding:12px 20px;color:#fff;text-decoration:none
}
.sidebar-menu a.active,
.sidebar-menu a:hover{
  background:rgba(0,212,255,.2);
  border-left:4px solid var(--accent)
}

/* MAIN */
.main{margin-left:260px;padding:24px;width:100%}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.header h1{color:var(--accent)}

.filters{
  background:#fff;padding:15px;border-radius:10px;
  display:flex;gap:10px;align-items:center;flex-wrap:wrap
}
.filters input,.filters select{
  padding:8px;border-radius:6px;border:1px solid #ccc
}
.btn{
  background:var(--accent);border:none;color:#fff;
  padding:10px 18px;border-radius:8px;cursor:pointer
}
.btn:hover{background:#0099cc}

.summary{display:flex;gap:15px;margin:20px 0}
.card{
  background:#fff;padding:20px;border-radius:10px;
  flex:1;box-shadow:0 2px 6px rgba(0,0,0,.08)
}
.card .value{font-size:22px;font-weight:700}

.layout{display:grid;grid-template-columns:2fr 1fr;gap:20px}

.chart-box,.table-box{
  background:#fff;padding:20px;border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,.08)
}

table{width:100%;border-collapse:collapse}
th,td{padding:12px;border-bottom:1px solid #eee}
th{text-transform:uppercase;font-size:12px;color:#666}

@media(max-width:1000px){
  .layout{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="dashboard">

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="sidebar-header">
    <img src="logo.png" class="sidebar-logo">
    <strong>SMART<br>DENTISTRY</strong>
  </div>
  <ul class="sidebar-menu">
    <li><a href="admin.html"><i class="fa fa-home"></i>Dashboard</a></li>
    <li><a href="Finance.html"><i class="fa fa-dollar-sign"></i>Finance</a></li>
    <li><a href="Reports.html" class="active"><i class="fa fa-chart-line"></i>Reports</a></li>
  </ul>
</div>

<!-- MAIN -->
<main class="main">
<div class="header">
  <h1>Reports</h1>
  <div>Dr. Arvin</div>
</div>

<!-- FILTERS -->
<div class="filters">
  <label>Date:</label>
  <input type="date" id="fromDate">
  <input type="date" id="toDate">

  <label>Type:</label>
  <select id="reportType">
    <option value="all">All</option>
    <option value="Income">Income</option>
    <option value="Appointment">Appointment</option>
    <option value="Balance">Balance</option>
  </select>

  <button class="btn" id="generateBtn">
    <i class="fa fa-play"></i> Generate
  </button>
  <button class="btn" id="exportBtn">
    <i class="fa fa-download"></i> Export CSV
  </button>
</div>

<!-- SUMMARY -->
<div class="summary">
  <div class="card">
    <h4>Total Records</h4>
    <div class="value" id="totalItems">0</div>
  </div>
  <div class="card">
    <h4>Total Amount</h4>
    <div class="value" id="totalAmount">PHP 0.00</div>
  </div>
  <div class="card">
    <h4>Period</h4>
    <div class="value" id="periodText">—</div>
  </div>
</div>

<div class="layout">
<div>

<!-- CHART -->
<div class="chart-box">
  <h4>Monthly Income</h4>
  <canvas id="reportsChart"></canvas>
</div>

<!-- TABLE -->
<div class="table-box">
  <h4>Report Entries</h4>
  <table id="reportsTable">
    <thead>
      <tr>
        <th>#</th><th>Date</th><th>Patient</th><th>Type</th><th>Amount</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>
</div>

<div class="chart-box">
  <h4>Top Procedures</h4>
  <canvas id="topProcedures"></canvas>
</div>
</div>
</main>
</div>

<script>
/* SAMPLE DATA */
const data = [
 {date:'2025-10-01',patient:'John D.',type:'Income',amount:1500},
 {date:'2025-10-03',patient:'Maria S.',type:'Income',amount:2400},
 {date:'2025-10-05',patient:'Paul R.',type:'Balance',amount:500},
 {date:'2025-10-08',patient:'Anna L.',type:'Appointment',amount:0},
 {date:'2025-10-12',patient:'Lisa K.',type:'Income',amount:3200}
];

const tbody=document.querySelector('#reportsTable tbody');
const totalItems=document.getElementById('totalItems');
const totalAmount=document.getElementById('totalAmount');
const periodText=document.getElementById('periodText');

/* RENDER */
function render(rows){
 tbody.innerHTML='';
 if(!rows.length){
  tbody.innerHTML=`<tr><td colspan="5" style="text-align:center;color:#999">No data</td></tr>`;
 }
 let sum=0;
 rows.forEach((r,i)=>{
  sum+=r.amount;
  tbody.innerHTML+=`
   <tr>
    <td>${i+1}</td>
    <td>${r.date}</td>
    <td>${r.patient}</td>
    <td>${r.type}</td>
    <td>${r.amount?`PHP ${r.amount.toFixed(2)}`:'—'}</td>
   </tr>`;
 });
 totalItems.textContent=rows.length;
 totalAmount.textContent='PHP '+sum.toFixed(2);
}

/* FILTER */
function getFiltered(){
 const from=fromDate.value,to=toDate.value,type=reportType.value;
 return data.filter(r=>{
  if(type!=='all' && r.type!==type) return false;
  if(from && r.date<from) return false;
  if(to && r.date>to) return false;
  return true;
 });
}

/* CHARTS */
const barChart=new Chart(reportsChart,{
 type:'bar',
 data:{labels:['Week1','Week2','Week3','Week4'],
 datasets:[{data:[0,0,0,0],backgroundColor:'#00d4ff'}]},
 options:{plugins:{legend:{display:false}}}
});

const donut=new Chart(topProcedures,{
 type:'doughnut',
 data:{
  labels:['Cleaning','Filling','Extraction'],
  datasets:[{data:[2600,3200,1800],backgroundColor:['#00d4ff','#2ecc71','#f1c40f']}]
 }
});

/* EVENTS */
generateBtn.onclick=()=>{
 const rows=getFiltered();
 render(rows);
 const weeks=[0,0,0,0];
 rows.forEach(r=>{
  if(r.type==='Income'){
   const w=Math.min(3,Math.floor((new Date(r.date).getDate()-1)/7));
   weeks[w]+=r.amount;
  }
 });
 barChart.data.datasets[0].data=weeks;
 barChart.update();
};

exportBtn.onclick=()=>alert('CSV export ready for backend');

/* INIT */
render(data);
</script>
</body>
</html>
