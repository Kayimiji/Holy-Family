<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Dentistry – Functional Odontogram</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">


<style>
:root{
  --sidebar-bg:#2c3e50;
  --sidebar-active:#00bfff;
  --bg:#eef8fc;
  --card:#ffffff;
  --shadow:0 4px 12px rgba(0,0,0,.08);
  --text:#2c3e50;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif}
body{background:var(--bg);color:var(--text)}

/* ===== LAYOUT ===== */
.dashboard{display:flex;min-height:100vh}

/* ===== SIDEBAR ===== */
.sidebar{
  width:250px;
  background:var(--sidebar-bg);
  color:#fff;
  position:fixed;
  top:0;left:0;bottom:0;
}
.sidebar-header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:20px;
}
.sidebar-logo{
  width:50px;
  height:50px;
  border-radius:50%;
}
.sidebar-title h2{
  font-size:16px;
  color:var(--sidebar-active);
  line-height:1.1;
}
.sidebar-menu{list-style:none}
.sidebar-menu a{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 20px;
  color:#fff;
  text-decoration:none;
}
.sidebar-menu a:hover,
.sidebar-menu a.active{
  background:rgba(0,191,255,.2);
  border-left:4px solid var(--sidebar-active);
}

/* Dropdown */
.dropdown .arrow{
  margin-left:auto;
  transition:.3s;
}
.dropdown.open .arrow{
  transform:rotate(180deg);
}
.submenu{
  list-style:none;
  display:none;
  background:#243444;
}
.dropdown.open .submenu{
  display:block;
}
.submenu a{
  padding:10px 40px;
  font-size:14px;
}

/* ===== MAIN ===== */
.main{
  margin-left:250px;
  width:calc(100% - 250px);
  display:flex;
  flex-direction:column;
}
body{font-family:Arial;background:#eef2f7;margin:0;padding:20px}
h2{text-align:center}

.wrapper{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}

.card{
  background:#fff;
  padding:20px;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.1);
}

/* ===== ODONTOGRAM ===== */
#teeth{
  display:grid;
  grid-template-columns:repeat(8,1fr);
  gap:6px;
  margin-top:10px;
}

.tooth{
  border:1px solid #ccc;
  padding:8px;
  text-align:center;
  cursor:pointer;
  border-radius:4px;
  font-size:12px;
}

/* COLORS */
.decay{background:#9b59b6;color:#fff}
.periodontal{background:#3498db;color:#fff}
.trauma{background:#e74c3c;color:#fff}
.structural{background:#e67e22;color:#fff}
.developmental{background:#2ecc71;color:#fff}

/* ===== FORM ===== */
input,select,textarea{
  width:100%;
  padding:6px;
  margin-bottom:8px;
}

button{
  padding:8px 12px;
  border:none;
  border-radius:4px;
  cursor:pointer;
}

.green{background:#2ecc71;color:#fff}
.blue{background:#3498db;color:#fff}
.gray{background:#7f8c8d;color:#fff}

.medicine{
  display:flex;
  gap:5px;
  margin-bottom:5px;
}
.medicine input{flex:1}

/* PREVIEW */
#preview{
  border:1px solid #ccc;
  padding:15px;
  min-height:200px;
}
</style>
</head>

<body>
<body>

<div class="dashboard">

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-header">
    <img src="logo.png" class="sidebar-logo">
    <div class="sidebar-title">
      <h2>SMART<br>DENTISTRY</h2>
    </div>
  </div>

  <ul class="sidebar-menu">
    <li><a href="admin.html"><i class="fas fa-home"></i> Dashboard</a></li>

    <li class="dropdown open">
      <a href="#" class="dropdown-toggle">
        <i class="fas fa-tooth"></i> My Clinic
        <i class="fas fa-chevron-down arrow"></i>
      </a>
      <ul class="submenu">
        <li><a href="clinic-profile.html">Clinic Profile</a></li>
        <li><a href="odontogram-prescription.html"class="active">Dental Chart</a></li>
        <li><a href="Braces-Treatment.html">Braces Treatment</a></li>
        <li><a href="MyRecords.html">Patient Records</a></li>
      </ul>
    </li>

    <li><a href="appointment-logs.html"><i class="fas fa-clipboard-list"></i> Appointment Logs</a></li>
    <li><a href="patients.html"><i class="fas fa-users"></i> Patients</a></li>
    <li><a href="Finance.html"><i class="fas fa-dollar-sign"></i> Finance</a></li>
    <li><a href="Reports.html"><i class="fas fa-chart-line"></i> Reports</a></li>
    <li><a href="Tutorial.html"><i class="fas fa-book"></i> Tutorial</a></li>
    <li><a href="landingpage.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
  </ul>
</aside>
<!-- MAIN -->
<div class="main">

<div class="wrapper">

<!-- LEFT -->
<div class="card">
<h3>Odontogram</h3>

<select id="condition">
  <option value="">Select Condition</option>
  <option value="decay">Decay / Infection</option>
  <option value="periodontal">Periodontal</option>
  <option value="trauma">Loss / Trauma</option>
  <option value="structural">Structural Damage</option>
  <option value="developmental">Developmental</option>
</select>

<div id="teeth"></div>

<hr>

<h3>Prescription Details</h3>
<input id="clinic" placeholder="Clinic Name">
<input id="doctor" placeholder="Doctor Name">
<input type="date" id="date">

<input id="patient" placeholder="Patient Name">
<input id="age" placeholder="Age">

<select id="gender">
  <option>Male</option>
  <option>Female</option>
</select>

<textarea id="diagnosis" placeholder="Auto Diagnosis" rows="4"></textarea>

<textarea id="notes" placeholder="Additional Notes"></textarea>

<h4>Medicines</h4>
<div id="medList"></div>

<button id="addMed" class="gray">+ Add Medicine</button>
<button id="update" class="blue">Update Preview</button>
</div>

<!-- RIGHT -->
<div class="card">
<h3>Prescription Preview</h3>
<div id="preview">No data yet</div>
<br>
<button id="print" class="green">Print</button>
<button id="pdf" class="blue">Export PDF</button>
</div>

</div>

<script>
/* =======================
   ODONTOGRAM
======================= */
const teethContainer = document.getElementById("teeth");
const conditionSelect = document.getElementById("condition");
const diagnosisBox = document.getElementById("diagnosis");

const teethNums = [
  18,17,16,15,14,13,12,11,
  21,22,23,24,25,26,27,28,
  48,47,46,45,44,43,42,41,
  31,32,33,34,35,36,37,38
];

let toothState = {};

teethNums.forEach(n=>{
  const d=document.createElement("div");
  d.className="tooth";
  d.textContent=n;
  d.onclick=()=>{
    if(!conditionSelect.value){
      alert("Select condition first");
      return;
    }
    d.className="tooth "+conditionSelect.value;
    toothState[n]=conditionSelect.value;
    autoDiagnosis();
  };
  teethContainer.appendChild(d);
});

/* =======================
   AUTO DIAGNOSIS
======================= */
function autoDiagnosis(){
  let map={};
  for(let t in toothState){
    map[toothState[t]]=map[toothState[t]]||[];
    map[toothState[t]].push(t);
  }

  let text="";
  if(map.decay) text+=`Decay/Infection: ${map.decay.join(", ")}\n`;
  if(map.periodontal) text+=`Periodontal: ${map.periodontal.join(", ")}\n`;
  if(map.trauma) text+=`Trauma/Loss: ${map.trauma.join(", ")}\n`;
  if(map.structural) text+=`Structural Damage: ${map.structural.join(", ")}\n`;
  if(map.developmental) text+=`Developmental: ${map.developmental.join(", ")}\n`;

  diagnosisBox.value=text.trim();
}

/* =======================
   MEDICINE
======================= */
document.getElementById("addMed").onclick=()=>{
  const div=document.createElement("div");
  div.className="medicine";
  div.innerHTML=`
    <input placeholder="Medicine">
    <input placeholder="Dose">
    <input placeholder="Freq">
    <button onclick="this.parentElement.remove()">✖</button>
  `;
  document.getElementById("medList").appendChild(div);
};

/* =======================
   PREVIEW
======================= */
document.getElementById("update").onclick=()=>{
  let meds="";
  document.querySelectorAll(".medicine").forEach(m=>{
    const i=m.querySelectorAll("input");
    meds+=`<li>${i[0].value} – ${i[1].value} – ${i[2].value}</li>`;
  });

  document.getElementById("preview").innerHTML=`
    <h3>${clinic.value}</h3>
    <p><b>Doctor:</b> ${doctor.value}</p>
    <p><b>Date:</b> ${date.value}</p>
    <hr>
    <p><b>Patient:</b> ${patient.value} (${age.value}, ${gender.value})</p>
    <p><b>Diagnosis:</b><br>${diagnosis.value.replace(/\n/g,"<br>")}</p>
    <ul>${meds||"<li>No medicine</li>"}</ul>
    <p><b>Notes:</b> ${notes.value}</p>
  `;
};

/* =======================
   PRINT & PDF
======================= */
document.getElementById("print").onclick=()=>{
  document.getElementById("update").click();
  const w=window.open();
  w.document.write(preview.innerHTML);
  w.print();
};

document.getElementById("pdf").onclick=()=>{
  document.getElementById("update").click();
  window.print();
};
</script>

</body>
</html>
