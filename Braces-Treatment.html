<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Braces Treatment Plan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --sidebar-bg:#2c3e50;
  --sidebar-active:#00bfff;
  --bg:#eef8fc;
  --card:#ffffff;
  --shadow:0 4px 12px rgba(0,0,0,.08);
  --text:#2c3e50;
}

/* ===== BASE ===== */
*{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif}
body{background:var(--bg);color:var(--text);margin:0;}

/* ===== SIDEBAR ===== */
.sidebar{
  width:250px;
  background:var(--sidebar-bg);
  color:#fff;
  position:fixed;
  top:0;left:0;bottom:0;
}
.sidebar-header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:20px;
}
.sidebar-logo{
  width:50px;
  height:50px;
  border-radius:50%;
}
.sidebar-title h2{
  font-size:16px;
  color:var(--sidebar-active);
  line-height:1.1;
}
.sidebar-menu{list-style:none}
.sidebar-menu a{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 20px;
  color:#fff;
  text-decoration:none;
}
.sidebar-menu a:hover,
.sidebar-menu a.active{
  background:rgba(0,191,255,.2);
  border-left:4px solid var(--sidebar-active);
}

/* Dropdown */
.dropdown .arrow{
  margin-left:auto;
  transition:.3s;
}
.dropdown.open .arrow{
  transform:rotate(180deg);
}
.submenu{
  list-style:none;
  display:none;
  background:#243444;
}
.dropdown.open .submenu{
  display:block;
}
.submenu a{
  padding:10px 40px;
  font-size:14px;
}

/* ===== MAIN ===== */
.main {
  margin-left: 250px;
  padding: 20px;
  min-height: 100vh;
  background: var(--bg);
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  overflow-x: hidden;
}

/* ===== CONTAINER ===== */
.container {
  background: var(--card);
  padding: 30px 25px;
  border-radius: 12px;
  max-width: 1200px;
  width: 100%;
  margin: 0 auto 30px auto;
  box-shadow: var(--shadow);
  box-sizing: border-box;
}

/* ===== BASE ===== */
h2{margin-bottom:10px}
.search-box{background:#fff;padding:10px;border-radius:6px;margin-bottom:10px;position:relative}
.search-box input{width:100%;border:none;outline:none}
.patient-list{background:#fff;border-radius:6px;box-shadow:0 4px 10px rgba(0,0,0,.1);margin-bottom:20px}
.patient-item{padding:10px;cursor:pointer;border-bottom:1px solid #eee}
.patient-item:hover{background:#e9faff}
.patient-item.selected{background:#c8f1ff;font-weight:600}

/* GRID */
.grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(280px,1fr));gap:20px}
.card{background:#fff;border-radius:8px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
.card h3{border-bottom:1px solid #ddd;padding-bottom:6px;margin-bottom:10px}
label{display:block;margin:6px 0}
input[type=text],select{width:100%;padding:6px}
.phase-row{cursor:pointer}
.phase-row:hover{background:#f1faff}
.phase-row.selected{background:#c8f1ff;border-left:4px solid #00cfff}
.save-btn{background:#32cd32;color:#fff;border:none;padding:10px;border-radius:4px;width:100%;cursor:pointer;margin-top:10px}
.btn-outline{background:#fff;border:1px solid #ccc;padding:6px 10px;border-radius:4px;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:10px;border-bottom:1px solid #ddd}
th{background:#f5f5f5}
@media(max-width:900px){
  .main{margin-left:0;width:100%}
  .container{width:95%;padding:20px;margin:20px auto}
  .grid{grid-template-columns:1fr}
}

/* ===== WALKTHROUGH ===== */
.tour-overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.6);
  display:none;z-index:999;
  animation:fade .4s;
}
.tour-tooltip{
  position:fixed;
  background:#fff;
  max-width:380px;
  padding:20px;
  border-radius:12px;
  box-shadow:0 12px 30px rgba(0,0,0,.3);
  display:none;
  z-index:1001;
  font-size:14px;line-height:1.5;color:#2c3e50;
  animation:fade .4s;
}
.tour-tooltip::after{
  content:"";
  position:absolute;
  width:0;height:0;
  border:8px solid transparent;
  border-bottom-color:#fff;
  top:-16px;left:20px;
}
.tour-header{display:flex;align-items:center;gap:10px;font-weight:600;font-size:16px}
.tour-header i{font-size:20px;color:#00cfff}
.tour-actions{display:flex;justify-content:space-between;margin-top:12px}
.tour-actions button{border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;transition:0.2s;}
#nextTour{background:#00cfff;color:#fff}
#nextTour:hover{background:#0099cc;}
#skipTour{background:#eee;color:#333}
#skipTour:hover{background:#ccc;}
.tour-highlight{
  position:relative;z-index:1002;
  box-shadow:0 0 0 4px #00cfff,0 0 30px rgba(0,207,255,.7);
  border-radius:8px;
  transition: box-shadow 0.3s ease, transform 0.3s ease;
  transform: scale(1.03);
}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}
/* ===== ENHANCED WALKTHROUGH ===== */
.tour-progress {
  font-size: 12px;
  color: #64748b;
  margin-bottom: 6px;
}

.tour-arrow {
  position: fixed;
  width: 0;
  height: 0;
  border-left: 12px solid transparent;
  border-right: 12px solid transparent;
  border-top: 20px solid #00cfff;
  animation: bounce 1s infinite;
  z-index: 1003;
  display: none;
}

@keyframes bounce {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.tour-tooltip strong {
  color:#0ea5e9;
}

</style>
</head>
<body>
<!-- ARROW -->
<div id="tourArrow" class="tour-arrow"></div>

<div class="dashboard">

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-header">
    <img src="logo.png" class="sidebar-logo">
    <div class="sidebar-title">
      <h2>SMART<br>DENTISTRY</h2>
    </div>
  </div>

  <ul class="sidebar-menu">
    <li><a href="admin.html"><i class="fas fa-home"></i> Dashboard</a></li>
    <li class="dropdown open">
      <a href="#" class="dropdown-toggle">
        <i class="fas fa-tooth"></i> My Clinic
        <i class="fas fa-chevron-down arrow"></i>
      </a>
      <ul class="submenu">
        <li><a href="clinic-profile.html"><i class="fas fa-clinic-medical"></i> Clinic Profile</a></li>
        <li><a href="odontogram-prescription.html"><i class="fas fa-tooth"></i> Dental Chart</a></li>
        <li><a href="Braces-Treatment.html"><i class="fas fa-brackets-curly"></i> Braces Treatment</a></li>
        <li><a href="MyRecords.html"><i class="fas fa-file-medical"></i> Patient Records</a></li>
      </ul>
    </li>
    <li><a href="appointment-logs.html"><i class="fas fa-clipboard-list"></i> Appointment Logs</a></li>
    <li><a href="patients.html"><i class="fas fa-users"></i> Patients</a></li>
    <li><a href="Finance.html"><i class="fas fa-dollar-sign"></i> Finance</a></li>
    <li><a href="Reports.html"><i class="fas fa-chart-line"></i> Reports</a></li>
    <li><a href="landingpage.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
  </ul>
  <!-- Add Return to Home menu at the bottom -->
    <div style="position: absolute; bottom: 20px; width: 13%;">
    <div style="position: absolute; bottom: 20px; width: 100%;">
    <ul class="sidebar-menu settings-menu">
    <li><a href="Admin settings.html"><i class="fas fa-cog"></i> Settings</a></li>
    </ul>
    <ul class="sidebar-menu return-home-menu">
    <li><a href="landingpage.html" class="logout-btn"><i class="fas fa-arrow-left"></i> Return Home</a></li>
    </ul>
    </div>
    </div>
</aside>

<!-- MAIN -->
<div class="main">
<div class="container">
  <button id="restartTourBtn" style="
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:999;
  background:#0ea5e9;
  color:#fff;
  border:none;
  padding:10px 14px;
  border-radius:20px;
  cursor:pointer;
  box-shadow:0 6px 15px rgba(0,0,0,.25);
">
üîÑ Restart Tutorial
</button>


<h2>Braces Treatment Plan</h2>

<!-- SEARCH -->
<div class="search-box">
  <input id="searchPatient" placeholder="SEARCH A PATIENT">
</div>

<!-- PATIENT LIST -->
<div class="patient-list">
  <div class="patient-item">Samillano, Kristina Casandra</div>
  <div class="patient-item">Reyes, Juan Miguel</div>
  <div class="patient-item">Dela Cruz, Maria Angela</div>
</div>

<p><b>Selected Patient:</b> <span id="selectedPatientSpan">None</span></p>

<!-- GRID -->
<div class="grid">

<div class="card">
<h3>Archwire Sequence</h3>
<label><input type="radio" name="archwire"> Initial alignment (NiTi)</label>
<label><input type="radio" name="archwire"> Working phase (Stainless)</label>
<label><input type="radio" name="archwire"> Finishing & detailing</label>
</div>

<div class="card">
<h3>Auxiliaries</h3>
<label><input type="checkbox"> Elastics</label>
<label><input type="checkbox"> Power chains</label>
<label><input type="checkbox"> Springs</label>
<label><input type="checkbox"> Bite turbos</label>
</div>

<div class="card">
<h3>Treatment Summary</h3>
<p>No selection yet</p>
<button id="saveTreatmentPlan" class="save-btn">SAVE TREATMENT PLAN</button>
</div>

</div>

<!-- ASSESSMENT -->
<div class="card" style="margin-top:20px">
<div style="display:flex;justify-content:space-between">
<h3>Patient Assessment</h3>
<div>
<button id="editAssessment" class="btn-outline">Edit</button>
<button id="saveAssessment" class="save-btn" style="display:none">Save</button>
</div>
</div>

<label>Chief Complaint</label>
<input id="chiefComplaint" disabled>

<label>Malocclusion</label>
<select id="malocclusion" disabled>
<option>Class I</option><option>Class II</option><option>Class III</option>
</select>

<label><input type="checkbox" id="crowding" disabled> Crowding</label>
<label><input type="checkbox" id="overbite" disabled> Overbite</label>
<label><input type="checkbox" id="crossbite" disabled> Crossbite</label>
</div>

<!-- PHASES -->
<div class="card" style="margin-top:20px">
<h3>Treatment Phases</h3>
<table>
<tr class="phase-row"><td>Phase 1</td><td>Alignment</td><td>4‚Äì6 months</td></tr>
<tr class="phase-row"><td>Phase 2</td><td>Space closure</td><td>6‚Äì12 months</td></tr>
<tr class="phase-row"><td>Phase 3</td><td>Finishing</td><td>3‚Äì6 months</td></tr>
</table>
<button id="savePhases" class="save-btn">SAVE PHASES</button>
</div>

<!-- VISUAL TUTORIAL -->
<div id="tourOverlay" class="tour-overlay"></div>
<div id="tourTooltip" class="tour-tooltip">
  <div class="tour-header">
    <i id="tourIcon" class="fas fa-info-circle"></i>
    <span id="tourTitle"></span>
  </div>
  <p id="tourText"></p>
  <div class="tour-actions">
    <button id="skipTour">Skip</button>
    <button id="nextTour">Next</button>
  </div>
</div>

</div>
</div>

<script>
let selectedPatient="";

/* SEARCH */
document.getElementById("searchPatient").onkeyup=()=>document.querySelectorAll(".patient-item")
.forEach(p=>p.style.display=p.textContent.toLowerCase().includes(searchPatient.value.toLowerCase())?"block":"none");

/* PATIENT SELECT */
document.querySelectorAll(".patient-item").forEach(p=>{
  p.onclick=()=>{
    document.querySelectorAll(".patient-item").forEach(x=>x.classList.remove("selected"));
    p.classList.add("selected");
    selectedPatient=p.textContent;
    document.getElementById("selectedPatientSpan").textContent=selectedPatient;
  };
});

/* ASSESSMENT */
document.getElementById("editAssessment").onclick=()=>{
  ["chiefComplaint","malocclusion","crowding","overbite","crossbite"]
  .forEach(id=>document.getElementById(id).disabled=false);
  document.getElementById("editAssessment").style.display="none";
  document.getElementById("saveAssessment").style.display="inline-block";
};
document.getElementById("saveAssessment").onclick=()=>{
  alert("Assessment Saved");
  location.reload();
};

/* PHASE SELECT */
document.querySelectorAll(".phase-row").forEach(r=>{
  r.onclick=()=>r.classList.toggle("selected");
});


/* =========================
   RESTART WALKTHROUGH
========================= */
document.getElementById("restartTourBtn").addEventListener("click", () => {
  // reset step
  stepIndex = 0;

  // clear saved progress
  localStorage.removeItem("bracesTourDone");

  // small delay para smooth restart
  setTimeout(() => {
    showStep();
  }, 300);
});



/* =========================
   ENHANCED WALKTHROUGH
========================= */

const steps = [
  {
    el: ".search-box",
    title: "üîç Step 1: Search Patient",
    text: "Type the <strong>patient name</strong> here. The list will automatically filter while you type."
  },
  {
    el: ".patient-list",
    title: "üë§ Step 2: Select Patient",
    text: "Click a patient from the list to <strong>activate their treatment record</strong>."
  },
  {
    el: ".grid",
    title: "üìù Step 3: Treatment Setup",
    text: "Choose the <strong>archwire phase</strong> and needed <strong>auxiliaries</strong>."
  },
  {
    el: "#saveTreatmentPlan",
    title: "üíæ Step 4: Save Treatment Plan",
    text: "Once done, click this button to <strong>save the plan</strong>."
  },
  {
    el: ".card:nth-of-type(4)",
    title: "ü©∫ Step 5: Patient Assessment",
    text: "Click <strong>Edit</strong>, complete the assessment, then save."
  },
  {
    el: ".phase-row",
    title: "üìÖ Step 6: Treatment Phases",
    text: "Select applicable phases and click <strong>Save Phases</strong>."
  }
];

let stepIndex = 0;
const overlay = document.getElementById("tourOverlay");
const tooltip = document.getElementById("tourTooltip");
const arrow = document.getElementById("tourArrow");

function showStep() {
  document.querySelectorAll(".tour-highlight")
    .forEach(e => e.classList.remove("tour-highlight"));

  const step = steps[stepIndex];
  const el = document.querySelector(step.el);
  if (!el) return;

  el.scrollIntoView({ behavior: "smooth", block: "center" });
  el.classList.add("tour-highlight");

  const rect = el.getBoundingClientRect();

  // Tooltip
  tooltip.innerHTML = `
    <div class="tour-progress">Step ${stepIndex + 1} of ${steps.length}</div>
    <div class="tour-header">
      <i class="fas fa-lightbulb"></i>
      <span>${step.title}</span>
    </div>
    <p>${step.text}</p>
    <div class="tour-actions">
      <button id="skipTour">Skip</button>
      <button id="nextTour">${stepIndex === steps.length - 1 ? "Finish" : "Next"}</button>
    </div>
  `;

  tooltip.style.display = "block";
  tooltip.style.top = rect.bottom + 20 + "px";
  tooltip.style.left = rect.left + "px";

  // Arrow
  arrow.style.left = rect.left + rect.width / 2 - 12 + "px";
  arrow.style.top = rect.top - 25 + "px";
  arrow.style.display = "block";

  overlay.style.display = "block";

  document.getElementById("nextTour").onclick = nextStep;
  document.getElementById("skipTour").onclick = endTour;
}

function nextStep() {
  stepIndex++;
  if (stepIndex >= steps.length) {
    endTour();
  } else {
    showStep();
  }
}

function endTour() {
  overlay.style.display = "none";
  tooltip.style.display = "none";
  arrow.style.display = "none";
  document.querySelectorAll(".tour-highlight")
    .forEach(e => e.classList.remove("tour-highlight"));
  localStorage.setItem("bracesTourDone", "yes");
}

/* AUTO RUN (FIRST TIME ONLY) */
window.onload = () => {
  if (!localStorage.getItem("bracesTourDone")) {
    showStep();
  }
};
</script>

</body>
</html>
