<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clinic Prescription Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f7fa;
      color: #333;
    }
    header {
      background: #00D4FF;
      color: white;
      padding: 15px 20px;
      text-align: center;
    }
    main {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      padding: 20px;
      gap: 20px;
    }
    section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
      flex: 1;
      min-width: 350px;
      max-width: 600px;
    }
    h2 {
      border-bottom: 2px solid #00D4FF;
      padding-bottom: 5px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, textarea, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: left;
    }
    th {
      background: #eaf1fb;
    }
    button {
      margin-top: 10px;
      padding: 10px 15px;
      background: #00D4FF;;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #00D4FF;;
    }
    #previewBox {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 8px;
      background: #fff;
      min-height: 200px;
    }
    /* Odontogram styling */
.odontogram-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 6px;
  margin-top: 10px;
}

.tooth {
  width: 40px;
  height: 40px;
  border: 2px solid #ccc;
  border-radius: 6px;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.tooth:hover {
  border-color: #0066cc;
}

.tooth.active {
  background: #ffcb05;
  border-color: #cc9900;
  color: #000;
  font-weight: bold;
}
.odontogram-container {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.odontogram-image {
  width: 100%;
  height: 100%;
  object-fit: contain; /* Keeps full image visible */
}

  </style>
</head>
<body>

  <header>
    <h1>Smart Prescription Generator</h1>
  </header>

  <main>
    <section>
      <h2>Prescription Details</h2>

      <label>Clinic Name:</label>
      <input type="text" id="clinicPreview" placeholder="e.g. Sunshine Health Clinic">

      <label>Clinic Contact:</label>
      <input type="text" id="clinicContact" placeholder="e.g. +1 (555) 123-4567">

      <label>Doctor Name:</label>
      <input type="text" id="doctorName" placeholder="Dr. John Doe">

      <label>License Number:</label>
      <input type="text" id="license" placeholder="MD-12345">

      <label>Date:</label>
      <input type="date" id="prescDate">

      <label>Patient Name:</label>
      <input type="text" id="patientName">

      <label>Age:</label>
      <input type="number" id="patientAge">

      <label>Gender:</label>
      <select id="patientGender">
        <option value="">Select...</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>

      <label>Contact:</label>
      <input type="text" id="patientContact">

      <label>Diagnosis / Notes:</label>
      <textarea id="diagnosis" rows="3"></textarea>

      <h3>Medications</h3>
      <table id="medTable">
        <thead>
          <tr>
            <th>Medicine</th>
            <th>Dose</th>
            <th>Freq.</th>
            <th>Duration</th>
            <th>Instructions</th>
            <th>❌</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <button type="button" onclick="addMedicine()">+ Add Medicine</button>

      <label>Additional Notes:</label>
      <textarea id="notes" rows="3"></textarea>

      <button onclick="updatePreview()">Update Preview</button>
      <button onclick="downloadTXT()">Download .txt</button>
      <button onclick="downloadHTML()">Download .html</button>
    </section>

    <section>
      <h2>Preview</h2>
      <div id="previewBox">Fill out the form to preview the prescription.</div>
    </section>
    <section>
    <!-- Odontogram area -->
    <h2 style="margin: top 10px;;">Odontogram</h2>
    <div id="odontogram" class="odontogram-grid"></div>

    
      <div class="odontogram-container">
        <img
          src="Odontograma.jpg"
          alt="Odontogram Placeholder"
          class="odontogram-image"
        />
    </section>
    </main>

  <script>
    function addMedicine() {
      const tbody = document.querySelector("#medTable tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td><input class="med-name" placeholder="Name"></td>
        <td><input class="med-dose" placeholder="e.g. 500mg"></td>
        <td><input class="med-freq" placeholder="e.g. 2x/day"></td>
        <td><input class="med-duration" placeholder="e.g. 5 days"></td>
        <td><input class="med-note" placeholder="Before meals"></td>
        <td><button onclick="this.closest('tr').remove()">✖</button></td>
      `;
      tbody.appendChild(row);
    }

    function updatePreview() {
      const preview = document.getElementById("previewBox");
      preview.innerHTML = buildPlainText().replace(/\n/g, "<br>");
    }

    function buildPlainText() {
      let out = '';
      out += 'Clinic: ' + (document.getElementById('clinicPreview').value || '') + '\n';
      out += 'Contact: ' + (document.getElementById('clinicContact').value || '') + '\n';
      out += 'Doctor: ' + (document.getElementById('doctorName').value || '') + '\n';
      out += 'License: ' + (document.getElementById('license').value || '') + '\n';
      out += 'Date: ' + (document.getElementById('prescDate').value || '') + '\n\n';

      out += 'Patient: ' + (document.getElementById('patientName').value || '') + '\n';
      out += 'Age/Gender: ' + (document.getElementById('patientAge').value || '') + ' / ' +
             (document.getElementById('patientGender').value || '') + '\n';
      out += 'Contact: ' + (document.getElementById('patientContact').value || '') + '\n\n';

      out += 'Diagnosis / Notes:\n' + (document.getElementById('diagnosis').value || '') + '\n\n';
      out += 'Medications:\n';

      const rows = document.querySelectorAll('#medTable tbody tr');
      if (rows.length === 0) {
        out += '- None\n';
      } else {
        rows.forEach((r, i) => {
          const name = r.querySelector('.med-name')?.value || '';
          const dose = r.querySelector('.med-dose')?.value || '';
          const freq = r.querySelector('.med-freq')?.value || '';
          const duration = r.querySelector('.med-duration')?.value || '';
          const note = r.querySelector('.med-note')?.value || '';
          out += `${i + 1}. ${name} — ${dose}, ${freq}, ${duration}\n   Instructions: ${note}\n\n`;
        });
      }

      out += 'Additional Notes:\n' + (document.getElementById('notes').value || '') + '\n\n';
      out += 'Prescribing Physician: ' + (document.getElementById('doctorName').value || '') + '\n';

      return out;
    }
    // ----- Odontogram -----
    function renderOdontogram() {
  const odontogram = document.getElementById("odontogram");
  odontogram.innerHTML = "";

  // Adult teeth numbers (FDI system simplified)
  const teeth = [
    18,17,16,15,14,13,12,11,
    21,22,23,24,25,26,27,28,
    48,47,46,45,44,43,42,41,
    31,32,33,34,35,36,37,38
  ];

  teeth.forEach(num => {
    const div = document.createElement("div");
    div.className = "tooth";
    div.textContent = num;
    div.onclick = () => div.classList.toggle("active");
    odontogram.appendChild(div);
  });
    }

    // Run after page load
    document.addEventListener("DOMContentLoaded", renderOdontogram);


    function downloadTXT() {
      const text = buildPlainText();
      const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `prescription_${new Date().toISOString().slice(0, 10)}.txt`;
      a.click();
      URL.revokeObjectURL(a.href);
    }

    function downloadHTML() {
      const html = document.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `prescription_${new Date().toISOString().slice(0, 10)}.html`;
      a.click();
      URL.revokeObjectURL(a.href);
    }
  </script>

</body>
</html>
